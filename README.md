# psycho.ru v5
## Составляющие
- [бэкенд](backend);
- [база данных](backend/models);
- [фронтенд](frontend);
- [компилириуемый(Sass/TS) фронэтнд](src/frontend).

Для сборки проекта используется Gulp 3.9, [конфигурация](gulpfile.js).  
Результаты работы сохраняются в папку `build/debug` и `build/psycho.ru` в зависимости от типа сборки. 

## Переменные окружения
Для работы сайта необходимы следующие переменные окружения:
```
# база данных
PSYCHO_DB_USER      // имя пользователя
PSYCHO_DB_DATABASE  // база данных
PSYCHO_DB_PWD       // пароль пользоватлея
PSYCHO_DB_ADDR      // адрес БД
PSYCHO_DB_PORT      // порт

#почтовый робот
PSYCHO_MAIL_USER      // имя пользователя
PSYCHO_MAIL_PASS      // пароль пользователя
PSYCHO_MAIL_FROM      // от кого
PSYCHO_MAIL_MANAGER   // адрес менеджера

#интерфейс администратора
PSYCHO_ADMIN_USER     // логин админа
PSYCHO_ADMIN_PWD      // пароль админа
```

## Развертывание для разработки
1. После скачивания в корневой папке дистрибутива `npm install`.
2. Для сборки debug-версии `gulp build`.
3. Для запуска livereload http-сервера на порту 8105 `gulp run`.

## Релизный билд
Отличается от отладочного:  
- скачиванием пакетов, необходимых для запуска проекта;
- созданием бандлов `css` и `js`, а также минификацией `css`, `js` и `html`.

Для сборки релизного билда необходимо установить значение `production` переменной окружения `NODE_ENV` [любым удобным способом](https://www.google.ru/search?q=set+node_env+production) и выполнить `gulp build`.  
После этого директорию `build/psycho.ru` можно считать корнем Node.js приложения для размещения сайта на нужном сервере.

## [Развертывание на Debian 8](server_setup.md)
